import { parse_param } from '@jellypack/runtime/lib/common/query';
import React from 'react';
import { createRoot } from 'react-dom/client';

import { LinkDappView } from '.';

import './assets/css/popup.scss';

const SCRIPT_NAME = 'easydapp-popup.umd.js';
const CSS_NAME = 'react.css';
const LOGO_DATA =
    'data:image/png;base64,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';

const load_popup = () => {
    // 1. find script src
    const script_src = (() => {
        const scripts = document.getElementsByTagName('script');
        for (const script of scripts) {
            const src = script.src;
            if (0 <= src.indexOf(SCRIPT_NAME)) return src;
        }
        return '';
    })();
    const [host, query] = script_src.split(SCRIPT_NAME);
    const id = parse_param(query).id;
    if (!script_src || !host || !id) {
        console.debug('can not find host and id from script src: ', script_src);
        return;
    }

    // 2. load css
    const css_link = document.createElement('link');
    css_link.rel = 'stylesheet';
    css_link.href = `${host}${CSS_NAME}`;
    document.head.appendChild(css_link);

    // 3. insert popup
    const button = document.createElement('button');
    button.id = 'easydapp-popup-button';
    button.innerHTML = `<img src="${LOGO_DATA}" />`;
    document.body.appendChild(button);

    const popup = document.createElement('div');
    popup.id = 'easydapp-popup';
    document.body.appendChild(popup);

    button.addEventListener('click', () => {
        const display = popup.style.display;
        if (display === 'block') {
            popup.style.display = 'none';
            return;
        }
        if (display === 'none') {
            popup.style.display = 'block';
            return;
        }

        // init
        popup.style.display = 'block';
        const root = createRoot(popup);
        root.render(<LinkDappView id={id} />);
    });
};

window.addEventListener('load', load_popup);
